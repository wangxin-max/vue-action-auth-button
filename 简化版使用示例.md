# ActionAuthButton 简化版使用指南

## ✨ 大幅简化！

组件代码从 348 行减少到 179 行，减少了 48%！

### 🎯 核心优化

1. **模板结构** - 从 5 个 template 简化为 2 个条件分支
2. **Props 参数** - 从 15 个减少到 9 个，移除冗余配置
3. **方法逻辑** - 5 个处理方法合并为 1 个通用方法
4. **样式代码** - 从 80+ 行减少到 50 行
5. **依赖简化** - 移除 vuex mapState 依赖

### 📋 极简使用方式

```vue
<template>
  <!-- 详情按钮 -->
  <ActionAuthButton type="view" :record="record" @view="handleView" />

  <!-- 编辑按钮 -->
  <ActionAuthButton type="edit" :record="record" @edit="handleEdit" />

  <!-- 删除按钮（内置确认弹窗） -->
  <ActionAuthButton type="delete" :record="record" @delete="handleDelete" />

  <!-- 新增按钮 -->
  <ActionAuthButton type="add" button-type="primary" @add="handleAdd">
    新增
  </ActionAuthButton>

  <!-- 自定义按钮 -->
  <ActionAuthButton type="export" :record="{}" @click="handleExport">
    导出数据
  </ActionAuthButton>
</template>

<script>
import ActionAuthButton from '@/components/ActionAuthButton/ActionAuthButton.vue'

export default {
  components: { ActionAuthButton },
  methods: {
    handleView(record) { console.log('查看:', record) },
    handleEdit(record) { console.log('编辑:', record) },
    handleDelete(record) { console.log('删除:', record) },
    handleAdd() { console.log('新增') },
    handleExport() { console.log('导出') }
  }
}
</script>
```

### 🔧 支持的 Props

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| type | String | - | 按钮类型：view/edit/add/delete/custom |
| text | String | '' | 自定义按钮文本 |
| record | Object | {} | 当前数据记录 |
| buttonType | String | 'primary' | 按钮类型（add/custom 有效） |
| icon | String | null | 自定义图标 |
| disabled | Boolean | false | 是否禁用 |
| loading | Boolean | false | 加载状态 |
| confirmTitle | String | '您确认删除这条数据吗？' | 删除确认文案 |

### 💡 简化亮点

- ✨ **超轻量** - 仅 179 行代码
- 🎯 **零配置** - 无需传入权���参数
- 🚀 **极简 API** - 最少只需 2 个参数
- 🔧 **内置功能** - 删除确认、权限提示、禁用状态
- 🎨 **统一风格** - 自适应样式和图标
- ⚡ **高性能** - 智能权限监听

### 🎨 自动样式

- **详情** - 蓝色，眼睛图标
- **编辑** - 绿色，编辑图标
- **删除** - 红色，删除图标
- **新增** - 按钮样式，蓝色
- **自定义** - 按钮样式，可配置

### 🔄 迁移对比

**原代码：**
```vue
<span v-show="hasButtonAuthority(currentPermissionId, 'view')" @click="handleView(record)">详情</span>
<span v-show="hasButtonAuthority(currentPermissionId, 'edit')" @click="handleEdit(record)">编辑</span>
<a-popconfirm v-show="hasButtonAuthority(currentPermissionId, 'delete')" title="确认删除?" @confirm="handleDelete(record)">
  <span>删除</span>
</a-popconfirm>
```

**新组件：**
```vue
<ActionAuthButton type="view" :record="record" @view="handleView" />
<ActionAuthButton type="edit" :record="record" @edit="handleEdit" />
<ActionAuthButton type="delete" :record="record" @delete="handleDelete" />
```

代码量减少 **70%**，功能更强大！